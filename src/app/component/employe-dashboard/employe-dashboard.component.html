<div class="container-fluid poppin-formulaire" fxLayout="column" fxLayoutGap="20px">
  <h1 fxFlex>Bienvenue dans l'espace employé !</h1>

  <mat-tab-group fxFlex>
    <mat-tab label="Gérer les annonces">
      <button mat-raised-button style="margin-bottom: 2em;margin-top:1em;" (click)="createVoiture()">Créer une nouvelle annonce</button>
      <div *ngIf="voitureList.length == 0">
        <h2>Aucune annonce pour le moment !</h2>
      </div>
      <table  *ngIf="voitureList.length > 0" mat-table [dataSource]="(voitureList | slice: low : highValue)" class="mat-elevation-z8">

        <ng-container matColumnDef="denomination">
          <th mat-header-cell *matHeaderCellDef>denomination</th>
          <td mat-cell *matCellDef="let element">{{element.denomination}}</td>
        </ng-container>
        <ng-container matColumnDef="kilometre">
          <th mat-header-cell *matHeaderCellDef>kilometre</th>
          <td mat-cell *matCellDef="let element">{{element.kilometre}}</td>
        </ng-container>
        <ng-container matColumnDef="energie">
          <th mat-header-cell *matHeaderCellDef>energie</th>
          <td mat-cell *matCellDef="let element">{{element.energie}}</td>
        </ng-container>
        <ng-container matColumnDef="annee_circulation">
          <th mat-header-cell *matHeaderCellDef>annee_circulation</th>
          <td mat-cell *matCellDef="let element">{{element.annee_circulation}}</td>
        </ng-container>
        <ng-container matColumnDef="prix">
          <th mat-header-cell *matHeaderCellDef>prix</th>
          <td mat-cell *matCellDef="let element">{{element.prix}}</td>
        </ng-container>
        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>action</th>
          <td mat-cell *matCellDef="let element">
            <a [matTooltip]="editer" (click)="editVoiture(element)"><i class="fa fa-edit"></i></a>
            <a style="margin-left:2em;"[matTooltip]="suppression" (click)="removeVoiture(element)"><i class="fa fa-remove"></i></a>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsVoiture"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsVoiture;"></tr>
      </table>
    </mat-tab>
    <mat-tab label="Gérer les avis">
      <div fxLayout="column" fxLayoutGap="20px">
        <button mat-raised-button style="margin-bottom: 2em;margin-top:1em;" (click)="createAvis()" fxFlex>Créer un avis</button>
        <table *ngIf="lesAvis.length > 0" mat-table [dataSource]="(lesAvis | slice: low : highValue)" class="mat-elevation-z8">

          <ng-container matColumnDef="nom">
            <th mat-header-cell *matHeaderCellDef>nom</th>
            <td mat-cell *matCellDef="let element">{{element.nom}}</td>
          </ng-container>

          <ng-container matColumnDef="note">
            <th mat-header-cell *matHeaderCellDef>note</th>
            <td mat-cell *matCellDef="let element">{{element.note}}</td>
          </ng-container>
          <ng-container matColumnDef="commentaire">
            <th mat-header-cell *matHeaderCellDef>commentaire</th>
            <td mat-cell *matCellDef="let element">{{element.commentaire}}</td>
          </ng-container>
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>status</th>
            <td mat-cell *matCellDef="let element">{{element.status}}</td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>action</th>
            <td mat-cell *matCellDef="let element">
              <a *ngIf="checkIfAvisIsSubmitted(element)" [matTooltip]="validation" (click)="validAvis(element)"><i class="fa-solid fa-check fa-lg" style="color: #25c12f;"></i></a>
              <a [matTooltip]="suppression" (click)="deleteAvis(element)"><i class="fa-solid fa-remove fa-lg" style="color: red;"></i></a>
          </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <div *ngIf="lesAvis.length == 0">
          <h2>Aucun avis pour le moment !</h2>
        </div></div>
    </mat-tab>
  </mat-tab-group>
</div>
